<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>Note-a-Bite</title>
  <link rel="stylesheet" href="/style.css" />
  <link rel="manifest" href="/manifest.json" />
  <meta name="theme-color" content="#CBA623" />
</head>

<body>
  <main id="app">
    <!-- ====================================== -->
    <!-- Screen 0: Start -->
    <!-- ====================================== -->
    <section class="screen" id="start-screen" style="display: block;">
      <div class="start-cover">
        <h1>Note-a-Bite</h1>
        <!-- This button MUST have id="start-new-recipe" -->
        <button id="start-new-recipe">New Recipe</button>
      </div>
    </section>

    <!-- ====================================== -->
    <!-- Screen 1: Home (Write Your Recipe) -->
    <!-- ====================================== -->
    <section class="screen" id="home-screen">
      <div class="header">
        <h1>Write Your Recipe</h1>
        <p>°❀⋆.ೃ࿔*:･</p>
      </div>

      <div class="body">
        <div class="form-group">
          <!-- Recipe Name -->
          <div class="namecard">
            <div class="input-section">
              <label for="recipe-name"><h2>Recipe Name</h2></label>
              <input type="text" id="recipe-name" class="recipe-name" placeholder="Name …" />

              <!-- Confirm / Edit Buttons -->
              <div class="name-buttons">
                <button id="confirm-btn">Confirm</button>
                <button id="edit-btn" style="display: none;">Edit</button>
              </div>
            </div>
          </div>

          <!-- Ingredients Section (accordion + navigate) -->
          <div class="input-section">
            <div class="section-header">
              <h2 class="section-title" onclick="navigateToIngredients()">❀Ingredients❀</h2>
              <div class="section-header-details" onclick="toggleAccordion('ingredient-inputs', this)">
                <div class="ingredient-count">0</div>
                <div class="chevron">
                  <h2 style="width: 48px; height: 48px">›</h2>
                </div>
              </div>
            </div>
            <ul class="accordion-content" id="ingredient-inputs" style="display: none;"></ul>
          </div>

          <!-- Steps Section (accordion + navigate) -->
          <div class="input-section">
            <div class="section-header">
              <h2 class="section-title" onclick="navigateToSteps()">❀Steps❀</h2>
              <div class="section-header-details" onclick="toggleAccordion('step-inputs', this)">
                <div class="steps-count">0</div>
                <div class="chevron">
                  <h2 style="width: 48px; height: 48px">›</h2>
                </div>
              </div>
            </div>
            <ul class="accordion-content" id="step-inputs" style="display: none;"></ul>
          </div>

          <!-- Upload Image -->
          <div class="image-frame">
            <div style="position: relative; align-self: stretch;">
              <button
                onclick="document.getElementById('preview-image').click()"
                style="position: absolute; top: 50%; left: 50%; z-index: 2;"
              >
                Upload an Image⋆｡‧˚ʚɞ˚‧｡⋆
              </button>
              <input type="file" id="preview-image" accept="image/*" hidden />
              <img id="image-preview" src="#" alt="Preview" style="display: none;" />
            </div>
          </div>
        </div>
      </div>

      <div class="button-container">
        <div class="generate-button" onclick="generateRecipe()">
          <h2 style="color: #F2F2E5">GENERATE !!!</h2>
        </div>
      </div>
    </section>

    <!-- ====================================== -->
    <!-- Screen 2: Write Ingredients -->
    <!-- ====================================== -->
    <section class="screen" id="ingredients-screen">
      <div class="body">
        <div id="ingredients-card">
          <h2>Ingredients</h2>
          
          <div id="ingredients-list"></div>

          <div class="add-button-container">
            <button onclick="addIngredient()">+ Add Ingredient ✮⋆˙</button>
          </div>
        </div>
      </div>

      <div class="nav-buttons">
        <button onclick="goHome()">← Back to Home</button>
      </div>
    </section>

    <!-- ====================================== -->
    <!-- Screen 3: Write Steps -->
    <!-- ====================================== -->
    <section class="screen" id="steps-screen">
      <div class="body">
        <div id="steps-card">
          <h2>Steps</h2>
          
          <div id="steps-list"></div>
          
          <div class="add-button-container">
            <button onclick="addStep()">+ Add Step ✮⋆˙</button>
          </div>
        </div>
      </div>

      <div class="nav-buttons">
        <button onclick="goHome()">← Back</button>
      </div>
    </section>

    <!-- ====================================== -->
    <!-- Screen 4: Share Recipe -->
    <!-- ====================================== -->
    <section class="screen" id="share-screen">
      <div class="header">
        <h1>Share Your Recipe</h1>
        <p>(*ᴗ͈ˬᴗ͈)ꕤ*.ﾟ</p>
      </div>

      <div class="body">
        <div class="share-recipe">
          <!-- Recipe Name Display -->
          <div class="input-section">
            <div class="section-header">
              <h2>Recipe Name</h2>
              <p class="recipe-name" placeholder="Name …"></p>
            </div>
          </div>

          <!-- Ingredients (collapsible) -->
          <div class="share-row collapsible" onclick="toggleAccordion('ingredients')">
            <div class="section-header">
              <label><h2>Ingredients</h2></label>
              <div class="section-header-details">
                <span id="ingredient-count">0</span>
                <span class="chevron">›</span>
              </div>
            </div>
            <ul class="collapsible-content ingredients-list"></ul>
          </div>

          <!-- Steps (collapsible) -->
          <div class="share-row collapsible" onclick="toggleAccordion('steps')">
            <div class="section-header">
              <label><h2>Steps</h2></label>
              <span id="step-count">0</span>
              <span class="chevron">›</span>
            </div>
            <ol class="collapsible-content steps-list"></ol>
          </div>

          <!-- Image + QR Code -->
          <div class="image-qr-row">
            <img id="preview-image-uploaded" src="#" alt="Uploaded Dish" />
            <div id="qr-code" class="qr-box"></div>
          </div>
        </div>
      </div>

      <!-- Tapping “New Recipe” here simply goes back to Home -->
      <button onclick="showScreen('home-screen')">New Recipe</button>
    </section>
  </main>

  <script src="script.js"></script>
</body>
</html>